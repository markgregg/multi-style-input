import{f as k}from"./index-Dj6nxAlZ.js";import{j as I}from"./jsx-runtime-DFKZ3ixi.js";import{R as m,r as A}from"./index-SSXOyoI7.js";const de=e=>{let t;const n=new Set,i=(u,_)=>{const S=typeof u=="function"?u(t):u;if(!Object.is(S,t)){const w=t;t=_??(typeof S!="object"||S===null)?S:Object.assign({},t,S),n.forEach(N=>N(t,w))}},p=()=>t,y={setState:i,getState:p,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(i,p,y);return y},Ie=e=>e?de(e):de,Pe=e=>e;function De(e,t=Pe){const n=m.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return m.useDebugValue(n),n}const pe=e=>{const t=Ie(e),n=i=>De(t,i);return Object.assign(n,t),n},X=e=>e?pe(e):pe,Me=m.createContext(),W=(e,t)=>{const n=e(m.useContext(Me));if(n===null)throw new Error("useState must be used within StateProvider");return De(n,t)},ie=e=>W(t=>t.configStore,e),le=e=>W(t=>t.decoratedBlockStore,e),ue=e=>W(t=>t.viewPortStore,e),qe=e=>W(t=>t.managedStore,e),Ne=e=>W(t=>t.optionsStore,e),Oe=(e,t)=>{m.useEffect(()=>{const n=new ResizeObserver(()=>{const{width:i,height:p}=(e==null?void 0:e.getBoundingClientRect())??{};t(i??0,p??0)});if(e){n.observe(e);const{width:i,height:p}=(e==null?void 0:e.getBoundingClientRect())??{};t(i??0,p??0)}return()=>{e&&n.unobserve(e)}},[e])},fe=(e,t)=>{for(let n=0;n<t.length;n+=1)if(n>e.length||n>t.length||e[n]!==t[n])return n;return t.length},me=e=>{if(!e)return 0;const t=document.getSelection();if(t&&t.rangeCount>0){let n=0;const i=t.getRangeAt(0),p=(b,c)=>{for(let y=0;y<b.childNodes.length;y+=1){const l=b.childNodes[y];if(l===c)return n+i.endOffset+((l.textContent??"").trim()===`
`?1:0);if(l&&l.nodeName==="#text"){const u=(l.textContent??"").length;n+=u}if(l.childNodes.length>0){const u=p(l,c);if(u)return u}}return null};return p(e,i.endContainer)??0}return 0},Ae=(e,t)=>{if(t!==-1){let n=0;const i=c=>{for(let y=0;y<c.childNodes.length;y+=1){const l=c.childNodes[y];if(l&&l.nodeName==="#text"){const u=(l.textContent??"").length;if(n+=u,t<n)return l}if(l.childNodes.length>0){const u=i(l);if(u)return u}}return null},p=i(e);if(p){const c=document.getSelection();c&&c.setPosition(p,t-(n-(p.textContent??"").length));return}const b=document.getSelection();if(b){const c=we(e);c&&c.nodeName==="#text"&&b.setPosition(c,(c.textContent??"").length>0?(c.textContent??"").length:0)}}},we=e=>{for(let t=e.childNodes.length-1;t>=0;t-=1){const n=e.childNodes[t];if(n.childNodes.length>0){const i=we(n);if(i)return i}else if((n.textContent??"").length>0)return n}return null},ke=(e,t)=>{if(t.length===0)return null;for(let n=1;;n+=1){if(t.length===n)return null;if(e.length===n||t[t.length-n]!==e[e.length-n])return t.length-(n-1)}},Le=e=>{let t=0;for(let n=e.length-1;n>0&&e[n]===`
`;n-=1)t+=1;return t>2?e.substring(0,e.length-(t-2)):e},O={ArrowRight:"ArrowRight",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",PageUp:"PageUp",PageDown:"PageDown",Home:"Home",End:"End",Enter:"Enter",Tab:"Tab",c:"c",C:"C",x:"x",X:"X",v:"v",V:"V",z:"z",Z:"Z",Space:" ",Escape:"Escape"},Te="_editElement_fcaqt_1",he={editElement:Te,"font-compact":"_font-compact_fcaqt_12","font-normal":"_font-normal_fcaqt_16","font-large":"_font-large_fcaqt_20"},Q=m.memo(()=>{const e=m.useRef(null),{size:t,onItemSelected:n,onChange:i,onCaretPositionChange:p,onFocus:b,onBlur:c,onClick:y,onDoubleClick:l,onMouseDown:u,onMouseUp:_,onMouseEnter:S,onMouseLeave:w,onMouseOver:N,onKeyDown:d,onKeyUp:x}=ie(f=>f),{setPosition:D,setSize:E}=ue(f=>f),{parentElement:P,text:z,caretPosition:q,dropDown:r,setParantElement:o,updateText:s,updateCaretPosition:a}=le(f=>f),{activeOption:h,next:g,prev:v}=Ne(f=>f);Oe(e.current,E),m.useEffect(()=>{!P&&e.current&&o(e.current)},[P]);const M=m.useCallback(f=>{f&&o(f),e.current=f},[]),L=m.useCallback(()=>{var f;if(i){const V=Le(((f=e.current)==null?void 0:f.textContent)??""),j=fe(z,V),B=me(e.current);a(B),s(V),i(V,j)}},[i,s]),C=m.useCallback(()=>{e.current&&D(e.current.scrollTop,e.current.scrollLeft)},[D]),U=m.useCallback(f=>{f.clipboardData.types.includes("text/html")&&f.preventDefault()},[]),F=m.useCallback(f=>{const V=document.getSelection();if(V){const j=V.getRangeAt(0);if(j.startContainer!==j.endContainer||j.startOffset!==j.endOffset){f.clipboardData.setData("text/plain",V.toString()),f.preventDefault();return}}e.current&&(f.clipboardData.setData("text/plain",e.current.textContent??""),f.preventDefault())},[]),R=m.useCallback(f=>{const V=document.getSelection();if(V){const j=V.getRangeAt(0);if(j.startContainer!==j.endContainer||j.startOffset!==j.endOffset){const B=V.toString();f.clipboardData.setData("text/plain",B);const H=z.replace(B,"");if(s(H),i){const G=fe(z,H);i(H,G)}f.preventDefault()}}},[z,i]),K=m.useCallback(f=>{if((f.key===O.ArrowLeft||f.key===O.ArrowRight||f.key===O.ArrowUp||f.key===O.ArrowDown||f.key===O.Home||f.key===O.End||f.key===O.PageDown||f.key===O.PageUp)&&p){const V=me(e.current);V!==q&&a(V)}x&&x(f)},[]),T=m.useCallback(f=>{let V=!1;switch(f.key){case O.Escape:break;case O.Z:case O.z:break;case O.ArrowUp:r&&(v(),V=!0);break;case O.ArrowDown:r&&(g(),V=!0);break;case O.Space:case O.Enter:r&&n&&(n(r.id??"",h),V=!0);break}V?(f.preventDefault(),f.stopPropagation()):d&&d(f)},[r,h,d,g,v,n]);return I.jsx("pre",{id:"si-edit-element",className:[he.editElement,he[`font-${t}`]].join(" "),contentEditable:"true",ref:M,autoCapitalize:"none",autoCorrect:"off",spellCheck:"false",onInput:L,onScroll:C,onPaste:U,onCopy:F,onCut:R,onKeyUp:K,onKeyDown:T,onFocus:b,onBlur:c,onClick:y,onDoubleClick:l,onMouseDown:u,onMouseUp:_,onMouseEnter:S,onMouseLeave:w,onMouseOver:N})});try{Q.displayName="EditElement",Q.__docgenInfo={description:"",displayName:"EditElement",props:{}}}catch{}const je="_dropDown_ypmzi_1",Re={dropDown:je},ee=m.memo(()=>{const{size:e,DropDownComponent:t,onItemSelected:n}=ie(E=>E),{id:i,top:p,left:b,dropDown:{activation:c,options:y=[]}={}}=le(E=>E.dropDown)??{},{top:l,left:u}=ue(E=>E),{activeOptionIdx:_,setOptions:S,setActiveOption:w}=Ne(E=>E);m.useEffect(()=>{S(y)},[y]);const N=m.useCallback(()=>{},[c]),d=m.useCallback(()=>{},[c]),x=m.useCallback(E=>{n&&n(i??"",E)},[]),D=m.useCallback(E=>{w(E)},[]);return I.jsx("div",{className:Re.dropDown,style:{top:(p??0)-l,left:(b??0)-u},children:t&&I.jsx(t,{size:e,onMouseLeftDropDown:N,onMouseEnteredDropDown:d,options:y,onOptionSelected:x,activeIndex:_,onActiveOptionChanged:D})})});try{ee.displayName="DropDown",ee.__docgenInfo={description:"",displayName:"DropDown",props:{}}}catch{}const ze="_enhancedInput_na6th_1",Ue="_editArea_na6th_10",Y={enhancedInput:ze,editArea:Ue,"font-compact":"_font-compact_na6th_22","font-normal":"_font-normal_na6th_26","font-large":"_font-large_na6th_30"},te=m.memo(()=>{const{tabIndex:e,className:t,style:n,size:i="normal"}=ie(d=>d),{customElements:p,dropDown:b,caretPosition:c,update:y}=le(d=>d),{top:l,left:u,height:_}=ue(d=>d),{text:S,textBlocks:w}=qe(d=>d);m.useEffect(()=>y(S,w,i),[S,w,i]);const N=m.useMemo(()=>p.filter(d=>d.top-l+d.height>=0&&d.top-u<=_),[p,_,l,u]);return I.jsx("div",{tabIndex:e??-1,id:"si-enhanced-Input",className:[Y.enhancedInput,Y[`font-${i}`],t].join(" "),style:n,children:I.jsxs("div",{className:Y.editArea,children:[I.jsx(Q,{}),N.map(d=>I.jsx("div",{style:{position:"absolute",lineHeight:"normal",left:d.left-u,top:d.top-l,width:d.width,height:d.top-l+d.height<_?d.height:_-(d.top-l)},children:I.jsx(d.Decorator,{id:d.id,text:d.text,start:d.start,end:d.end,cursorPosition:c,textElement:d.textElement,customProps:d.customProps,size:i,style:d.decoratorStyle})},d.id)),b&&I.jsx(ee,{})]})})});try{te.displayName="EnhancedInput",te.__docgenInfo={description:"",displayName:"EnhancedInput",props:{}}}catch{}const Fe=({tabIndex:e,className:t,style:n,size:i,DropDownComponent:p,onItemSelected:b,onChange:c,onCaretPositionChange:y,onFocus:l,onBlur:u,onClick:_,onDoubleClick:S,onMouseDown:w,onMouseUp:N,onMouseEnter:d,onMouseLeave:x,onMouseOver:D,onKeyDown:E,onKeyUp:P})=>X(()=>({tabIndex:e,className:t,style:n,size:i,DropDownComponent:p,onItemSelected:b,onChange:c,onCaretPositionChange:y,onFocus:l,onBlur:u,onClick:_,onDoubleClick:S,onMouseDown:w,onMouseUp:N,onMouseEnter:d,onMouseLeave:x,onMouseOver:D,onKeyDown:E,onKeyUp:P})),Ke=({onBlockClick:e,onBlockDblClick:t,onBlockMouseDown:n,onBlockMouseUp:i,onBlockMouseEnter:p,onBlockMouseLeave:b,onBlockMouseOver:c})=>{const y=(r,o,s)=>({type:"t",start:r,end:o,text:s}),l=(r,o,s,a,h,g)=>({type:"s",start:r,end:o,text:s,id:a,style:h,existingStyle:g}),u=(r,o,s)=>{let a=0;return o.sort((g,v)=>g.start-v.start),r.split(`
`).map(g=>{let v=a;const M=o.filter(({start:L,length:C})=>L>=a&&L+C<=a+g.length).flatMap(({id:L,start:C,length:U,style:F})=>{const R=s.find(T=>T.id===L),K=[...C>v?[y(v,v+(C-v-1),g.substring(v-a,C-a))]:[],l(C,C+U-1,g.substring(C-a,C-a+U),L,F,R==null?void 0:R.style)];return v=C+U,K});return v<a+g.length?M.push(y(v,v+(g.length-(v-a)),`${g.substring(v-a)}
`)):M.push(y(v,v,`
`)),a+=g.length+1,M})},_=(r,o,s,a)=>{const h=u(o,s,a);let g=0;for(;g<h.length;){const v=h[g],M=g<r.childNodes.length?r.childNodes[g]:null;g===0&&r.childNodes.length>0&&M&&M.nodeName==="#text"?v.length===1&&v[0].type==="t"?M.textContent!==v[0].text&&(M.textContent=v[0].text):(S(r,v,M),r.removeChild(M)):M?M.nodeName!=="DIV"?(S(r,v,M),r.removeChild(M)):w(v,M):S(r,v),g+=1}for(;g<r.childNodes.length;)r.removeChild(r.childNodes[g])},S=(r,o,s=null)=>{const a=document.createElement("div");E(r,a,s),o.length===0?N(a,`
`):o.forEach(h=>{h.type==="t"?N(a,h.text):d(a,h)})},w=(r,o)=>{if(r.length===1&&r[0].type==="t"&&o.childNodes.length===1&&o.childNodes[0].nodeName==="#text"){o.childNodes[0].textContent!==r[0].text&&(o.childNodes[0].textContent=r[0].text);return}let s=0;for(;s<r.length;){const a=r[s],h=s<o.childNodes.length?o.childNodes[s]:null;a.type==="s"?h&&a.id!==h.id?x(o,s,a.id)?(o.removeChild(h),D(o.childNodes[s],a)):d(o,a,h):h&&h.id===a.id?D(h,a):d(o,a,h):h?o.nodeName!=="#text"?(N(o,a.text,h),o.removeChild(h)):h.textContent!==a.text&&(h.textContent=a.text):N(o,a.text,h),s+=1}for(;s<o.childNodes.length;)o.removeChild(o.childNodes[s])},N=(r,o,s=null)=>{const a=document.createTextNode(o);E(r,a,s)},d=(r,{id:o,text:s,style:a},h=null)=>{const g=document.createElement("span");g.textContent=s,g.id=o,a&&(g.style.cssText=a),E(r,g,h),P(g)},x=(r,o,s)=>r.childNodes.length>o+1&&"id"in r.childNodes[o+1]&&s===r.childNodes[o+1].id,D=(r,{text:o,style:s,existingStyle:a})=>{r.textContent!==o&&(r.textContent=o),s!==a&&(r.style.cssText=s??"")},E=(r,o,s=null)=>{s?r.insertBefore(o,s):r.appendChild(o)},P=r=>{const o=C=>({event:C,id:r.id,blockText:r.textContent??""}),s=C=>{e==null||e(o(C))},a=C=>{t==null||t(o(C))},h=C=>{n==null||n(o(C))},g=C=>{i==null||i(o(C))},v=C=>{p==null||p(o(C))},M=C=>{b==null||b(o(C))},L=C=>{c==null||c(o(C))};e&&r.addEventListener("click",s),t&&r.addEventListener("dblclick",a),n&&r.addEventListener("mousedown",h),i&&r.addEventListener("mouseup",g),p&&r.addEventListener("mouseenter",v),b&&r.addEventListener("mouseleave",M),c&&r.addEventListener("mouseover",L)},z=(r,o)=>{if(o.length===0)return!1;const{start:s,length:a}=o.sort((h,g)=>h.start-g.start)[o.length-1];return s+a+1>=r.length},q=(r,o)=>({top:r.offsetTop+(o?r.offsetHeight+2:0),left:r.offsetLeft,width:r.offsetWidth,height:r.offsetHeight});return X(r=>({text:"",textBlocks:[],parentElement:null,customElements:[],dropDown:null,caretPosition:0,currentSize:"normal",setParantElement:o=>r(()=>({parentElement:o})),updateText:o=>r(()=>({text:o})),updateCaretPosition:o=>r(()=>({caretPosition:o})),update:(o,s,a)=>r(h=>{const{parentElement:g,text:v,textBlocks:M,caretPosition:L,currentSize:C}=h;if(!g||v.length>1&&v===o&&JSON.stringify(M)===JSON.stringify(s)&&!z(v,M)&&v[v.length-1]!==`
`&&C===a)return{};_(g,o,s,M);const U=ke(v,o)??L;Ae(g,U);const F=s.filter(T=>"Decorator"in T).map(T=>{const{id:f,start:V,length:j,Decorator:B,clasName:H,decoratorStyle:G,customProps:Ve}=T,Z=document.getElementById(f);if(!Z)return null;const ce=Z.textContent??"";return{id:f,text:ce,start:V,end:V+ce.length,length:j,Decorator:B,textElement:Z,clasName:H,decoratorStyle:G,customProps:Ve,...q(Z,!1)}}).filter(T=>T!==null),{id:R,dropDown:K}=s.find(T=>"dropDown"in T)??{};return{text:o,textBlocks:s,customElements:F,currentSize:a,dropDown:R?{id:R,dropDown:K,...q(document.getElementById(R),!0)}:null}})}))},Be=()=>X(e=>({top:0,left:0,width:0,height:0,setPosition:(t,n)=>e(()=>({top:t,left:n})),setSize:(t,n)=>e(()=>({width:t,height:n}))})),$e=({text:e,textBlocks:t})=>X(()=>({text:e,textBlocks:t})),He=()=>X(e=>({options:[],activeOption:"",activeOptionIdx:0,setOptions:t=>e(()=>({options:t,activeOption:t[0],activeOptionIdx:0})),setActiveOption:t=>e(n=>({activeOption:n.options[t],activeOptionIdx:t})),next:()=>e(t=>{const n=t.activeOptionIdx<t.options.length-1?t.activeOptionIdx+=1:0;return{activeOption:t.options[n],activeOptionIdx:n}}),prev:()=>e(t=>{const n=t.activeOptionIdx>0?t.activeOptionIdx-=1:t.options.length-1;return{activeOption:t.options[n],activeOptionIdx:n}})})),ne=m.memo(({props:e,children:t})=>{const{onBlockClick:n,onBlockDblClick:i,onBlockMouseDown:p,onBlockMouseUp:b,onBlockMouseEnter:c,onBlockMouseLeave:y,onBlockMouseOver:l,tabIndex:u,className:_,style:S,size:w,DropDownComponent:N,onItemSelected:d,onChange:x,onCaretPositionChange:D,onFocus:E,onBlur:P,onClick:z,onDoubleClick:q,onMouseDown:r,onMouseUp:o,onMouseEnter:s,onMouseLeave:a,onMouseOver:h,onKeyDown:g,onKeyUp:v,text:M,textBlocks:L}=e,C=m.useMemo(()=>Fe(e),[u,_,S,w,N,d,x,D,E,P,z,q,r,o,s,a,h,g,v]),U=m.useMemo(()=>Ke(e),[n,i,p,b,c,y,l]),F=m.useMemo(Be,[]),R=m.useMemo(()=>$e(e),[M,L]),K=m.useMemo(He,[]),T=m.useMemo(()=>({configStore:C,decoratedBlockStore:U,viewPortStore:F,managedStore:R,optionsStore:K}),[C,U,F,R,K]);return I.jsx(Me.Provider,{value:T,children:t})});try{ne.displayName="StateProvider",ne.__docgenInfo={description:"",displayName:"StateProvider",props:{props:{defaultValue:null,description:"",name:"props",required:!0,type:{name:"MultiStyleInputProps"}}}}}catch{}const oe=m.memo(e=>I.jsx(ne,{props:e,children:I.jsx(te,{})}));try{oe.displayName="MultiStyleInput",oe.__docgenInfo={description:"",displayName:"MultiStyleInput",props:{text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},textBlocks:{defaultValue:null,description:"",name:"textBlocks",required:!0,type:{name:"DecoratedBlock[]"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"compact"'},{value:'"normal"'},{value:'"large"'}]}},DropDownComponent:{defaultValue:null,description:"",name:"DropDownComponent",required:!1,type:{name:"ComponentType<DropDownProps>"}},onItemSelected:{defaultValue:null,description:"",name:"onItemSelected",required:!1,type:{name:"((id: string, option: string) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((text: string, position: number) => void)"}},onCaretPositionChange:{defaultValue:null,description:"",name:"onCaretPositionChange",required:!1,type:{name:"((position: number) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<Element, Element>) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((event: FocusEvent<Element, Element>) => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseEnter:{defaultValue:null,description:"",name:"onMouseEnter",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseLeave:{defaultValue:null,description:"",name:"onMouseLeave",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseOver:{defaultValue:null,description:"",name:"onMouseOver",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<Element>) => void)"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"((event: KeyboardEvent<Element>) => void)"}},onBlockClick:{defaultValue:null,description:"",name:"onBlockClick",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockDblClick:{defaultValue:null,description:"",name:"onBlockDblClick",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockMouseDown:{defaultValue:null,description:"",name:"onBlockMouseDown",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockMouseUp:{defaultValue:null,description:"",name:"onBlockMouseUp",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockMouseEnter:{defaultValue:null,description:"",name:"onBlockMouseEnter",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockMouseLeave:{defaultValue:null,description:"",name:"onBlockMouseLeave",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockMouseOver:{defaultValue:null,description:"",name:"onBlockMouseOver",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}}}}}catch{}const Xe="_dropDownList_181pu_1",ge={dropDownList:Xe,"font-compact":"_font-compact_181pu_56","font-normal":"_font-normal_181pu_60","font-large":"_font-large_181pu_64"},re=({options:e,size:t,onOptionSelected:n,activeIndex:i,onActiveOptionChanged:p,onMouseEnteredDropDown:b,onMouseLeftDropDown:c})=>{const y=m.useCallback(u=>{p&&p(u)},[p]),l=m.useCallback(u=>{n(u)},[n]);return I.jsx("div",{id:"drop-down-list",className:[ge.dropDownList,ge[`font-${t}`]].join(" "),onMouseEnter:b,onMouseLeave:c,children:I.jsx("ul",{"aria-activedescendant":e[i],role:"listbox",tabIndex:-1,children:e.map((u,_)=>I.jsx("li",{"aria-selected":i===_,role:"option",tabIndex:0,onClick:()=>l(u),onMouseEnter:()=>y(_),children:u},u))})})};try{re.displayName="DropDown",re.__docgenInfo={description:"",displayName:"DropDown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"string[]"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"compact"'},{value:'"normal"'},{value:'"large"'}]}},onOptionSelected:{defaultValue:null,description:"",name:"onOptionSelected",required:!0,type:{name:"(option: string) => void"}},activeIndex:{defaultValue:null,description:"",name:"activeIndex",required:!0,type:{name:"number"}},onActiveOptionChanged:{defaultValue:null,description:"",name:"onActiveOptionChanged",required:!0,type:{name:"(activeIndex: number) => void"}},onMouseEnteredDropDown:{defaultValue:null,description:"",name:"onMouseEnteredDropDown",required:!0,type:{name:"() => void"}},onMouseLeftDropDown:{defaultValue:null,description:"",name:"onMouseLeftDropDown",required:!0,type:{name:"() => void"}}}}}catch{}const We=/[A-Z]/,Ze=/[A-Z]{2}[-]{0,1}[0-9]/,Je=/[A-Z]{2}[-]{0,1}[0-9A-Z]{8}[-]{0,1}[0-9]/,ve=["FR0127717439","FR0127733782","IT0004534522","IT0004534530","IT0004534548","IT0004534555","IT0004534571","IT0004534589","IT0004534605","IT0004545890","IT0004548282","IT0004548290","IT0004548308","FR0127694406","FR0127694349","FR0013053329","FR0127739029","XS2421195848","XS2430047212","XS2430287362","XS2430287529","XS2398750922","XS2343528571","XS2344772426","XS2499654643","AT000B066055","AT000B088455","AT0000A20877","XS1966819226","XS1966037860","AT000B126958","AT000B014642","AT000B126966","AT0000A282J7","AT0000A28603","AT0000A286S9","AT000B093190"],ye=["ABD","BDA","CAT","DE","EGG","FAN","GAF","HI","INN","JAK","LON","MON","NO","OPO","PAR","QAR","RAT","SEA","TUN","URN","VAN","WX","YY","ZEN"],Ge=e=>{if(e.length>2&&!e.includes(".")){const t=e.toLocaleLowerCase()[e.length-1];if(t==="m"||t==="k"){const n=Number(e.substring(0,e.length-1));return!Number.isNaN(Number(n))}return!Number.isNaN(Number(e))}return!1},Ye=e=>Text.length>2&&e.includes(".")?!Number.isNaN(Number.parseFloat(e)):!1,Qe=(e,t,n)=>{for(let i=n??e.length-1;i>=0;i-=1){const p=e[i];if(t.includes(p))return i+1}},et="_pillDecorator_zkaec_1",Ee={pillDecorator:et,"font-compact":"_font-compact_zkaec_10","font-normal":"_font-normal_zkaec_14","font-large":"_font-large_zkaec_18"},$=({textElement:e,text:t,start:n,end:i,cursorPosition:p,size:b,clasName:c,style:y})=>{const l=A.useRef(null),[u,_]=A.useState(!1),[S,w]=A.useState(0),[N,d]=A.useState(0),x=A.useMemo(()=>u||p>=n&&p<=i?"hidden":"visible",[u,p,n,i]),D=A.useCallback(P=>{_(!0),P.stopPropagation()},[u,_]),E=A.useCallback(P=>{P.target!==e&&_(!1)},[_,e]);return A.useEffect(()=>(u&&document.addEventListener("mouseover",E),()=>{u&&document.removeEventListener("mouseover",E)}),[u]),A.useEffect(()=>{l.current&&(w((l.current.offsetHeight-e.offsetHeight)/2*-1),d((l.current.offsetWidth-e.offsetWidth)/2*-1))},[e]),I.jsx("div",{ref:l,className:[Ee.pillDecorator,Ee[`font-${b}`],c??""].join(" "),style:{top:S,left:N,visibility:x,...y},onMouseEnter:D,children:t})};try{$.displayName="PillDecorator",$.__docgenInfo={description:"",displayName:"PillDecorator",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},clasName:{defaultValue:null,description:"",name:"clasName",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},start:{defaultValue:null,description:"",name:"start",required:!0,type:{name:"number"}},end:{defaultValue:null,description:"",name:"end",required:!0,type:{name:"number"}},cursorPosition:{defaultValue:null,description:"",name:"cursorPosition",required:!0,type:{name:"number"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"compact"'},{value:'"normal"'},{value:'"large"'}]}},textElement:{defaultValue:null,description:"",name:"textElement",required:!0,type:{name:"HTMLElement"}},customProps:{defaultValue:null,description:"",name:"customProps",required:!1,type:{name:"any"}}}}}catch{}const tt="_titleDecorator_1kanb_1",_e={titleDecorator:tt,"font-compact":"_font-compact_1kanb_10","font-normal":"_font-normal_1kanb_14","font-large":"_font-large_1kanb_18"};function se({customProps:e,textElement:t,clasName:n,style:i,size:p}){var N;const b=A.useRef(null),[c,y]=A.useState("hidden"),l=A.useRef(null),{title:u,position:_="top"}=e,S=A.useCallback(()=>{setTimeout(()=>{y("visible"),l.current&&(clearTimeout(l.current),l.current=null)},1)},[y]),w=A.useCallback(()=>{l.current=setTimeout(()=>{y("hidden"),l.current=null},200)},[y]);return A.useEffect(()=>(t.addEventListener("mouseenter",S),t.addEventListener("mouseleave",w),()=>{t.removeEventListener("mouseenter",S),t.removeEventListener("mouseleave",w)}),[t]),I.jsx("div",{ref:b,className:[_e.pillDecorator,_e[`font-${p}`],n??""].join(" "),style:{visibility:c,top:_==="top"?(((N=b.current)==null?void 0:N.clientHeight)??18)*-1:t.offsetHeight,left:0,...i},onMouseEnter:()=>S(),onMouseLeave:()=>w(),children:I.jsx("span",{style:{fontSize:"9px",padding:"2px 8px 2px 7px"},children:u})})}try{se.displayName="TitleDecorator",se.__docgenInfo={description:"",displayName:"TitleDecorator",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},clasName:{defaultValue:null,description:"",name:"clasName",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},start:{defaultValue:null,description:"",name:"start",required:!0,type:{name:"number"}},end:{defaultValue:null,description:"",name:"end",required:!0,type:{name:"number"}},cursorPosition:{defaultValue:null,description:"",name:"cursorPosition",required:!0,type:{name:"number"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"compact"'},{value:'"normal"'},{value:'"large"'}]}},textElement:{defaultValue:null,description:"",name:"textElement",required:!0,type:{name:"HTMLElement"}},customProps:{defaultValue:null,description:"",name:"customProps",required:!1,type:{name:"any"}}}}}catch{}const nt="_smartFilterPage_1v2cj_1",ot="_filterBar_1v2cj_8",rt="_grid_1v2cj_12",Ce={smartFilterPage:nt,filterBar:ot,grid:rt},ae=({className:e,style:t,onChange:n,onCaretPositionChange:i,onItemSelected:p,...b})=>{const[c,y]=m.useState(""),[l,u]=m.useState([]),_=m.useCallback((x,D,E)=>{const P=D===0?D:Qe(x,` 
\r	`,D)??0,z=x.substring(P).split(/ |\n|\r|\t/),q=l.filter(s=>s.start+s.length<P),r="font-style: italic;font-weight: bold;";let o=P;z.forEach(s=>{if(s.match(Je))E&&(ve.includes(s.toUpperCase())?q.push({id:`isin${o}`,start:o,length:s.length,style:r,Decorator:$,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white"}}):q.push({id:`isin${o}`,start:o,length:s.length,style:r,Decorator:$,decoratorStyle:{backgroundColor:"rgb(154, 61, 55)",color:"white"}}));else if(ye.includes(s))E&&q.push({id:`ticker${o}`,start:o,length:s.length,style:r,Decorator:$,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white"}});else if(Ge(s))E&&q.push({id:`vol${o}`,start:o,length:s.length,style:r,customProps:"Size",Decorator:se,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white",fontWeight:"bold"}});else if(Ye(s))E&&q.push({id:`prc${o}`,start:o,length:s.length,style:r,Decorator:$,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white",fontWeight:"bold"}});else if(D>=o&&D<=o+s.trimEnd().length&&x[D]!==""){if(s.match(Ze)){const a=ve.filter(h=>h.includes(s));a.length>0&&q.push({id:"bad-edit",start:o,length:s.length,style:"font-style: italic;font-weight: bold;",dropDown:{activation:"cursorposition",options:a.slice(0,5)}})}else if(s.match(We)){const a=ye.filter(h=>h.includes(s));a.length>0&&q.push({id:"bad-edit",start:o,length:s.length,style:"font-style: italic;font-weight: bold;",dropDown:{activation:"cursorposition",options:a.slice(0,5)}})}}o=o+s.length+1}),JSON.stringify(q)!==JSON.stringify(l)&&u(q),c!==x&&y(x)},[c,l]),S=m.useCallback((x,D)=>{_(x,D,!0),n&&n(x,D)},[_,c,l]),w=m.useCallback(x=>{_(c,x),i&&i(x)},[_,c,l]),N=m.useMemo(()=>l.map(x=>x.customProps?{...x,customProps:{title:x.customProps,position:"top"}}:x),[l]),d=m.useCallback((x,D)=>{const E=l.find(P=>P.id===x);if(E){const P=`${c.substring(0,E.start)}${D} ${c.substring(E.start+E.length)}`;_(P,E.start,!0)}p&&p(x,D)},[l,c,_]);return I.jsxs("div",{className:Ce.smartFilterPage,children:[I.jsx("h4",{children:"Multi Style Input"}),I.jsx("div",{className:Ce.filterBar,children:I.jsx(oe,{className:e,style:t,text:c,textBlocks:N,onChange:S,onCaretPositionChange:w,DropDownComponent:re,onItemSelected:d,...b})})]})};try{ae.displayName="MultiStyleInput",ae.__docgenInfo={description:"Primary UI component for user interaction",displayName:"MultiStyleInput",props:{exampleWidth:{defaultValue:null,description:"",name:"exampleWidth",required:!1,type:{name:"number"}},exampleHeight:{defaultValue:null,description:"",name:"exampleHeight",required:!1,type:{name:"number"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"compact"'},{value:'"normal"'},{value:'"large"'}]}},onItemSelected:{defaultValue:null,description:"",name:"onItemSelected",required:!1,type:{name:"((id: string, option: string) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((text: string, position: number) => void)"}},onCaretPositionChange:{defaultValue:null,description:"",name:"onCaretPositionChange",required:!1,type:{name:"((position: number) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<Element, Element>) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((event: FocusEvent<Element, Element>) => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseEnter:{defaultValue:null,description:"",name:"onMouseEnter",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseLeave:{defaultValue:null,description:"",name:"onMouseLeave",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseOver:{defaultValue:null,description:"",name:"onMouseOver",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<Element>) => void)"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"((event: KeyboardEvent<Element>) => void)"}}}}}catch{}const lt={title:"Examples/MultiStyleInput",component:ae,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{exampleWidth:{control:"number",description:"The width of the example"},exampleHeight:{control:"number",description:"The height of the example"},size:{options:["compact","normal","large"]},className:{description:"class name for custom class"},style:{description:"custom styling"}},args:{onItemSelected:k(),onChange:k(),onCaretPositionChange:k(),onFocus:k(),onBlur:k(),onClick:k(),onDoubleClick:k(),onMouseDown:k(),onMouseUp:k(),onMouseEnter:k(),onMouseLeave:k(),onMouseOver:k(),onKeyDown:k(),onKeyUp:k()}},J={args:{exampleHeight:600,exampleWidth:1e3}};var xe,be,Se;J.parameters={...J.parameters,docs:{...(xe=J.parameters)==null?void 0:xe.docs,source:{originalSource:`{
  args: {
    exampleHeight: 600,
    exampleWidth: 1000
  }
}`,...(Se=(be=J.parameters)==null?void 0:be.docs)==null?void 0:Se.source}}};const ut=["Primary"];export{J as Primary,ut as __namedExportsOrder,lt as default};

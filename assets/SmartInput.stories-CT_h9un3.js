import{f as L}from"./index-Dj6nxAlZ.js";import{j as I}from"./jsx-runtime-DFKZ3ixi.js";import{R as m,r as O}from"./index-SSXOyoI7.js";const Se="_enhancedInput_wyz0i_1",De={enhancedInput:Se},ue=e=>{let t;const n=new Set,c=(h,N)=>{const s=typeof h=="function"?h(t):h;if(!Object.is(s,t)){const P=t;t=N??(typeof s!="object"||s===null)?s:Object.assign({},t,s),n.forEach(v=>v(t,P))}},l=()=>t,f={setState:c,getState:l,getInitialState:()=>a,subscribe:h=>(n.add(h),()=>n.delete(h))},a=t=e(c,l,f);return f},_e=e=>e?ue(e):ue,Ne=e=>e;function Ee(e,t=Ne){const n=m.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return m.useDebugValue(n),n}const ce=e=>{const t=_e(e),n=c=>Ee(t,c);return Object.assign(n,t),n},z=e=>e?ce(e):ce,xe=m.createContext(),X=(e,t)=>{const n=e(m.useContext(xe));if(n===null)throw new Error("useState must be used within StateProvider");return Ee(n,t)},se=e=>X(t=>t.configStore,e),ie=e=>X(t=>t.decoratedBlockStore,e),ae=e=>X(t=>t.viewPortStore,e),Me=e=>X(t=>t.managedStore,e),Ce=e=>X(t=>t.optionsStore,e),we="_editElement_1v3pw_1",Ie={editElement:we},Pe=(e,t)=>{m.useEffect(()=>{const n=new ResizeObserver(()=>{const{width:c,height:l}=(e==null?void 0:e.getBoundingClientRect())??{};t(c??0,l??0)});if(e){n.observe(e);const{width:c,height:l}=(e==null?void 0:e.getBoundingClientRect())??{};t(c??0,l??0)}return()=>{e&&n.unobserve(e)}},[e])},de=(e,t)=>{for(let n=0;n<t.length;n+=1)if(n>e.length||n>t.length||e[n]!==t[n])return n;return t.length},pe=e=>{if(!e)return 0;const t=document.getSelection();if(t&&t.rangeCount>0){let n=0;const c=t.getRangeAt(0),l=(E,i)=>{for(let f=0;f<E.childNodes.length;f+=1){const a=E.childNodes[f];if(a===i)return n+c.endOffset+((a.textContent??"").trim()===`
`?1:0);if(a&&a.nodeName==="#text"){const h=(a.textContent??"").length;n+=h}if(a.childNodes.length>0){const h=l(a,i);if(h)return h}}return null};return l(e,c.endContainer)??0}return 0},Ve=(e,t)=>{if(t!==-1){let n=0;const c=i=>{for(let f=0;f<i.childNodes.length;f+=1){const a=i.childNodes[f];if(a&&a.nodeName==="#text"){const h=(a.textContent??"").length;if(n+=h,t<n)return a}if(a.childNodes.length>0){const h=c(a);if(h)return h}}return null},l=c(e);if(l){const i=document.getSelection();i&&i.setPosition(l,t-(n-(l.textContent??"").length));return}const E=document.getSelection();if(E){const i=be(e);i&&i.nodeName==="#text"&&E.setPosition(i,(i.textContent??"").length>0?(i.textContent??"").length:0)}}},be=e=>{for(let t=e.childNodes.length-1;t>=0;t-=1){const n=e.childNodes[t];if(n.childNodes.length>0){const c=be(n);if(c)return c}else if((n.textContent??"").length>0)return n}return null},qe=(e,t)=>{if(t.length===0)return null;for(let n=1;;n+=1){if(t.length===n)return null;if(e.length===n||t[t.length-n]!==e[e.length-n])return t.length-(n-1)}},Oe=e=>{let t=0;for(let n=e.length-1;n>0&&e[n]===`
`;n-=1)t+=1;return t>2?e.substring(0,e.length-(t-2)):e},q={ArrowRight:"ArrowRight",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",PageUp:"PageUp",PageDown:"PageDown",Home:"Home",End:"End",Enter:"Enter",Tab:"Tab",c:"c",C:"C",x:"x",X:"X",v:"v",V:"V",z:"z",Z:"Z",Space:" ",Escape:"Escape"},G=m.memo(()=>{const e=m.useRef(null),{onItemSelected:t,onChange:n,onCaretPositionChange:c,onFocus:l,onBlur:E,onClick:i,onDoubleClick:f,onMouseDown:a,onMouseUp:h,onMouseEnter:N,onMouseLeave:s,onMouseOver:P,onKeyDown:v,onKeyUp:S}=se(p=>p),{setPosition:_,setSize:C}=ae(p=>p),{parentElement:A,text:V,caretPosition:j,dropDown:D,setParantElement:o,updateText:r,updateCaretPosition:d}=ie(p=>p),{activeOption:u,next:y,prev:g}=Ce(p=>p);Pe(e.current,C),m.useEffect(()=>{!A&&e.current&&o(e.current)},[A]);const x=m.useCallback(p=>{p&&o(p),e.current=p},[]),M=m.useCallback(()=>{var p;if(n){const w=Oe(((p=e.current)==null?void 0:p.textContent)??""),T=de(V,w),K=pe(e.current);d(K),r(w),n(w,T)}},[n,r]),R=m.useCallback(()=>{e.current&&_(e.current.scrollTop,e.current.scrollLeft)},[_]),b=m.useCallback(p=>{p.clipboardData.types.includes("text/html")&&p.preventDefault()},[]),U=m.useCallback(p=>{const w=document.getSelection();if(w){const T=w.getRangeAt(0);if(T.startContainer!==T.endContainer||T.startOffset!==T.endOffset){p.clipboardData.setData("text/plain",w.toString()),p.preventDefault();return}}e.current&&(p.clipboardData.setData("text/plain",e.current.textContent??""),p.preventDefault())},[]),H=m.useCallback(p=>{const w=document.getSelection();if(w){const T=w.getRangeAt(0);if(T.startContainer!==T.endContainer||T.startOffset!==T.endOffset){const K=w.toString();p.clipboardData.setData("text/plain",K);const $=V.replace(K,"");if(r($),n){const J=de(V,$);n($,J)}p.preventDefault()}}},[V,n]),k=m.useCallback(p=>{if((p.key===q.ArrowLeft||p.key===q.ArrowRight||p.key===q.ArrowUp||p.key===q.ArrowDown||p.key===q.Home||p.key===q.End||p.key===q.PageDown||p.key===q.PageUp)&&c){const w=pe(e.current);w!==j&&d(w)}S&&S(p)},[]),F=m.useCallback(p=>{let w=!1;switch(p.key){case q.Escape:break;case q.Z:case q.z:break;case q.ArrowUp:D&&(g(),w=!0);break;case q.ArrowDown:D&&(y(),w=!0);break;case q.Space:case q.Enter:D&&t&&(t(D.id??"",u),w=!0);break}w?(p.preventDefault(),p.stopPropagation()):v&&v(p)},[D,u,v,y,g,t]);return I.jsx("pre",{id:"si-edit-element",className:Ie.editElement,contentEditable:"true",ref:x,autoCapitalize:"none",autoCorrect:"off",spellCheck:"false",onInput:M,onScroll:R,onPaste:b,onCopy:U,onCut:H,onKeyUp:k,onKeyDown:F,onFocus:l,onBlur:E,onClick:i,onDoubleClick:f,onMouseDown:a,onMouseUp:h,onMouseEnter:N,onMouseLeave:s,onMouseOver:P})});try{G.displayName="EditElement",G.__docgenInfo={description:"",displayName:"EditElement",props:{}}}catch{}const Ae="_dropDown_ypmzi_1",Le={dropDown:Ae},Y=m.memo(()=>{const{DropDownComponent:e,onItemSelected:t}=se(C=>C),{id:n,top:c,left:l,dropDown:{activation:E,options:i=[]}={}}=ie(C=>C.dropDown)??{},{top:f,left:a}=ae(C=>C),{activeOptionIdx:h,setOptions:N,setActiveOption:s}=Ce(C=>C);m.useEffect(()=>{N(i)},[i]);const P=m.useCallback(()=>{},[E]),v=m.useCallback(()=>{},[E]),S=m.useCallback(C=>{t&&t(n??"",C)},[]),_=m.useCallback(C=>{s(C)},[]);return I.jsx("div",{className:Le.dropDown,style:{top:(c??0)-f,left:(l??0)-a},children:e&&I.jsx(e,{onMouseLeftDropDown:P,onMouseEnteredDropDown:v,options:i,onOptionSelected:S,activeIndex:h,onActiveOptionChanged:_})})});try{Y.displayName="DropDown",Y.__docgenInfo={description:"",displayName:"DropDown",props:{}}}catch{}const Q=m.memo(()=>{const{tabIndex:e}=se(s=>s),{customElements:t,dropDown:n,caretPosition:c,update:l}=ie(s=>s),{top:E,left:i,height:f}=ae(s=>s),{text:a,textBlocks:h}=Me(s=>s);m.useEffect(()=>l(a,h),[a,h]);const N=m.useMemo(()=>t.filter(s=>s.top-E+s.height>=0&&s.top-i<=f),[t,f,E,i]);return I.jsxs("div",{tabIndex:e??-1,id:"si-enhanced-Input",className:De.enhancedInput,children:[I.jsx(G,{}),N.map(s=>I.jsx("div",{style:{position:"absolute",lineHeight:"normal",left:s.left-i,top:s.top-E,width:s.width,height:s.top-E+s.height<f?s.height:f-(s.top-E)},children:I.jsx(s.Decorator,{id:s.id,text:s.text,start:s.start,end:s.end,cursorPosition:c,textElement:s.textElement,customProps:s.customProps,style:s.decoratorStyle})},s.id)),n&&I.jsx(Y,{})]})});try{Q.displayName="EnhancedInput",Q.__docgenInfo={description:"",displayName:"EnhancedInput",props:{}}}catch{}const ke=({tabIndex:e,DropDownComponent:t,onItemSelected:n,onChange:c,onCaretPositionChange:l,onFocus:E,onBlur:i,onClick:f,onDoubleClick:a,onMouseDown:h,onMouseUp:N,onMouseEnter:s,onMouseLeave:P,onMouseOver:v,onKeyDown:S,onKeyUp:_})=>z(()=>({tabIndex:e,DropDownComponent:t,onItemSelected:n,onChange:c,onCaretPositionChange:l,onFocus:E,onBlur:i,onClick:f,onDoubleClick:a,onMouseDown:h,onMouseUp:N,onMouseEnter:s,onMouseLeave:P,onMouseOver:v,onKeyDown:S,onKeyUp:_})),Te=({onBlockClick:e,onBlockDblClick:t,onBlockMouseDown:n,onBlockMouseUp:c,onBlockMouseEnter:l,onBlockMouseLeave:E,onBlockMouseOver:i})=>{const f=(o,r,d)=>({type:"t",start:o,end:r,text:d}),a=(o,r,d,u,y,g)=>({type:"s",start:o,end:r,text:d,id:u,style:y,existingStyle:g}),h=(o,r,d)=>{let u=0;return r.sort((g,x)=>g.start-x.start),o.split(`
`).map(g=>{let x=u;const M=r.filter(({start:R,length:b})=>R>=u&&R+b<=u+g.length).flatMap(({id:R,start:b,length:U,style:H})=>{const k=d.find(p=>p.id===R),F=[...b>x?[f(x,x+(b-x-1),g.substring(x-u,b-u))]:[],a(b,b+U-1,g.substring(b-u,b-u+U),R,H,k==null?void 0:k.style)];return x=b+U,F});return x<u+g.length?M.push(f(x,x+(g.length-(x-u)),`${g.substring(x-u)}
`)):M.push(f(x,x,`
`)),u+=g.length+1,M})},N=(o,r,d,u)=>{const y=h(r,d,u);let g=0;for(;g<y.length;){const x=y[g],M=g<o.childNodes.length?o.childNodes[g]:null;g===0&&o.childNodes.length>0&&M&&M.nodeName==="#text"?x.length===1&&x[0].type==="t"?M.textContent!==x[0].text&&(M.textContent=x[0].text):(s(o,x,M),o.removeChild(M)):M?M.nodeName!=="DIV"?(s(o,x,M),o.removeChild(M)):P(x,M):s(o,x),g+=1}for(;g<o.childNodes.length;)o.removeChild(o.childNodes[g])},s=(o,r,d=null)=>{const u=document.createElement("div");A(o,u,d),r.length===0?v(u,`
`):r.forEach(y=>{y.type==="t"?v(u,y.text):S(u,y)})},P=(o,r)=>{if(o.length===1&&o[0].type==="t"&&r.childNodes.length===1&&r.childNodes[0].nodeName==="#text"){r.childNodes[0].textContent!==o[0].text&&(r.childNodes[0].textContent=o[0].text);return}let d=0;for(;d<o.length;){const u=o[d],y=d<r.childNodes.length?r.childNodes[d]:null;u.type==="s"?y&&u.id!==y.id?_(r,d,u.id)?(r.removeChild(y),C(r.childNodes[d],u)):S(r,u,y):y&&y.id===u.id?C(y,u):S(r,u,y):y?r.nodeName!=="#text"?(v(r,u.text,y),r.removeChild(y)):y.textContent!==u.text&&(y.textContent=u.text):v(r,u.text,y),d+=1}for(;d<r.childNodes.length;)r.removeChild(r.childNodes[d])},v=(o,r,d=null)=>{const u=document.createTextNode(r);A(o,u,d)},S=(o,{id:r,text:d,style:u},y=null)=>{const g=document.createElement("span");g.textContent=d,g.id=r,u&&(g.style.cssText=u),A(o,g,y),V(g)},_=(o,r,d)=>o.childNodes.length>r+1&&"id"in o.childNodes[r+1]&&d===o.childNodes[r+1].id,C=(o,{text:r,style:d,existingStyle:u})=>{o.textContent!==r&&(o.textContent=r),d!==u&&(o.style.cssText=d??"")},A=(o,r,d=null)=>{d?o.insertBefore(r,d):o.appendChild(r)},V=o=>{const r=b=>({event:b,id:o.id,blockText:o.textContent??""}),d=b=>{e==null||e(r(b))},u=b=>{t==null||t(r(b))},y=b=>{n==null||n(r(b))},g=b=>{c==null||c(r(b))},x=b=>{l==null||l(r(b))},M=b=>{E==null||E(r(b))},R=b=>{i==null||i(r(b))};e&&o.addEventListener("click",d),t&&o.addEventListener("dblclick",u),n&&o.addEventListener("mousedown",y),c&&o.addEventListener("mouseup",g),l&&o.addEventListener("mouseenter",x),E&&o.addEventListener("mouseleave",M),i&&o.addEventListener("mouseover",R)},j=(o,r)=>{if(r.length===0)return!1;const{start:d,length:u}=r.sort((y,g)=>y.start-g.start)[r.length-1];return d+u+1>=o.length},D=(o,r)=>({top:o.offsetTop+(r?o.offsetHeight+2:0),left:o.offsetLeft,width:o.offsetWidth,height:o.offsetHeight});return z(o=>({text:"",textBlocks:[],parentElement:null,customElements:[],dropDown:null,caretPosition:0,setParantElement:r=>o(()=>({parentElement:r})),updateText:r=>o(()=>({text:r})),updateCaretPosition:r=>o(()=>({caretPosition:r})),update:(r,d)=>o(u=>{const{parentElement:y,text:g,textBlocks:x,caretPosition:M}=u;if(!y||g.length>1&&g===r&&JSON.stringify(x)===JSON.stringify(d)&&!j(g,x)&&g[g.length-1]!==`
`)return{};N(y,r,d,x);const R=qe(g,r)??M;Ve(y,R);const b=d.filter(k=>"Decorator"in k).map(k=>{const{id:F,start:p,length:w,Decorator:T,clasName:K,decoratorStyle:$,customProps:J}=k,W=document.getElementById(F);if(!W)return null;const le=W.textContent??"";return{id:F,text:le,start:p,end:p+le.length,length:w,Decorator:T,textElement:W,clasName:K,decoratorStyle:$,customProps:J,...D(W,!1)}}).filter(k=>k!==null),{id:U,dropDown:H}=d.find(k=>"dropDown"in k)??{};return{text:r,textBlocks:d,customElements:b,dropDown:U?{id:U,dropDown:H,...D(document.getElementById(U),!0)}:null}})}))},Re=()=>z(e=>({top:0,left:0,width:0,height:0,setPosition:(t,n)=>e(()=>({top:t,left:n})),setSize:(t,n)=>e(()=>({width:t,height:n}))})),je=({text:e,textBlocks:t})=>z(()=>({text:e,textBlocks:t})),Ue=()=>z(e=>({options:[],activeOption:"",activeOptionIdx:0,setOptions:t=>e(()=>({options:t,activeOption:t[0],activeOptionIdx:0})),setActiveOption:t=>e(n=>({activeOption:n.options[t],activeOptionIdx:t})),next:()=>e(t=>{const n=t.activeOptionIdx<t.options.length-1?t.activeOptionIdx+=1:0;return{activeOption:t.options[n],activeOptionIdx:n}}),prev:()=>e(t=>{const n=t.activeOptionIdx>0?t.activeOptionIdx-=1:t.options.length-1;return{activeOption:t.options[n],activeOptionIdx:n}})})),ee=m.memo(({props:e,children:t})=>{const{onBlockClick:n,onBlockDblClick:c,onBlockMouseDown:l,onBlockMouseUp:E,onBlockMouseEnter:i,onBlockMouseLeave:f,onBlockMouseOver:a,onChange:h,text:N,textBlocks:s}=e,P=m.useMemo(()=>ke(e),[h]),v=m.useMemo(()=>Te(e),[n,c,l,E,i,f,a]),S=m.useMemo(Re,[]),_=m.useMemo(()=>je(e),[N,s]),C=m.useMemo(Ue,[]),A=m.useMemo(()=>({configStore:P,decoratedBlockStore:v,viewPortStore:S,managedStore:_,optionsStore:C}),[P,v,S,_,C]);return I.jsx(xe.Provider,{value:A,children:t})});try{ee.displayName="StateProvider",ee.__docgenInfo={description:"",displayName:"StateProvider",props:{props:{defaultValue:null,description:"",name:"props",required:!0,type:{name:"SmartInputProps"}}}}}catch{}const te=m.memo(e=>I.jsx(ee,{props:e,children:I.jsx(Q,{})}));try{te.displayName="SmartInput",te.__docgenInfo={description:"",displayName:"SmartInput",props:{text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},textBlocks:{defaultValue:null,description:"",name:"textBlocks",required:!0,type:{name:"DecoratedBlock[]"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},DropDownComponent:{defaultValue:null,description:"",name:"DropDownComponent",required:!1,type:{name:"ComponentType<DropDownProps>"}},onItemSelected:{defaultValue:null,description:"",name:"onItemSelected",required:!1,type:{name:"((id: string, option: string) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((text: string, position: number) => void)"}},onCaretPositionChange:{defaultValue:null,description:"",name:"onCaretPositionChange",required:!1,type:{name:"((position: number) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<Element, Element>) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((event: FocusEvent<Element, Element>) => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseEnter:{defaultValue:null,description:"",name:"onMouseEnter",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseLeave:{defaultValue:null,description:"",name:"onMouseLeave",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseOver:{defaultValue:null,description:"",name:"onMouseOver",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<Element>) => void)"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"((event: KeyboardEvent<Element>) => void)"}},onBlockClick:{defaultValue:null,description:"",name:"onBlockClick",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockDblClick:{defaultValue:null,description:"",name:"onBlockDblClick",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockMouseDown:{defaultValue:null,description:"",name:"onBlockMouseDown",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockMouseUp:{defaultValue:null,description:"",name:"onBlockMouseUp",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockMouseEnter:{defaultValue:null,description:"",name:"onBlockMouseEnter",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockMouseLeave:{defaultValue:null,description:"",name:"onBlockMouseLeave",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}},onBlockMouseOver:{defaultValue:null,description:"",name:"onBlockMouseOver",required:!1,type:{name:"((event: SmartElementMouseEvent) => void)"}}}}}catch{}const Fe="_dropDownList_oiquj_1",Ke={dropDownList:Fe},ne=({options:e,onOptionSelected:t,activeIndex:n,onActiveOptionChanged:c,onMouseEnteredDropDown:l,onMouseLeftDropDown:E})=>{const i=m.useCallback(a=>{c&&c(a)},[c]),f=m.useCallback(a=>{t(a)},[t]);return I.jsx("div",{id:"drop-down-list",className:Ke.dropDownList,onMouseEnter:l,onMouseLeave:E,children:I.jsx("ul",{"aria-activedescendant":e[n],role:"listbox",tabIndex:-1,children:e.map((a,h)=>I.jsx("li",{"aria-selected":n===h,role:"option",tabIndex:0,onClick:()=>f(a),onMouseEnter:()=>i(h),children:a},a))})})};try{ne.displayName="DropDown",ne.__docgenInfo={description:"",displayName:"DropDown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"string[]"}},onOptionSelected:{defaultValue:null,description:"",name:"onOptionSelected",required:!0,type:{name:"(option: string) => void"}},activeIndex:{defaultValue:null,description:"",name:"activeIndex",required:!0,type:{name:"number"}},onActiveOptionChanged:{defaultValue:null,description:"",name:"onActiveOptionChanged",required:!0,type:{name:"(activeIndex: number) => void"}},onMouseEnteredDropDown:{defaultValue:null,description:"",name:"onMouseEnteredDropDown",required:!0,type:{name:"() => void"}},onMouseLeftDropDown:{defaultValue:null,description:"",name:"onMouseLeftDropDown",required:!0,type:{name:"() => void"}}}}}catch{}const Be=/[A-Z]/,He=/[A-Z]{2}[-]{0,1}[0-9]/,$e=/[A-Z]{2}[-]{0,1}[0-9A-Z]{8}[-]{0,1}[0-9]/,fe=["FR0127717439","FR0127733782","IT0004534522","IT0004534530","IT0004534548","IT0004534555","IT0004534571","IT0004534589","IT0004534605","IT0004545890","IT0004548282","IT0004548290","IT0004548308","FR0127694406","FR0127694349","FR0013053329","FR0127739029","XS2421195848","XS2430047212","XS2430287362","XS2430287529","XS2398750922","XS2343528571","XS2344772426","XS2499654643","AT000B066055","AT000B088455","AT0000A20877","XS1966819226","XS1966037860","AT000B126958","AT000B014642","AT000B126966","AT0000A282J7","AT0000A28603","AT0000A286S9","AT000B093190"],me=["ABD","BDA","CAT","DE","EGG","FAN","GAF","HI","INN","JAK","LON","MON","NO","OPO","PAR","QAR","RAT","SEA","TUN","URN","VAN","WX","YY","ZEN"],ze=e=>{if(e.length>2&&!e.includes(".")){const t=e.toLocaleLowerCase()[e.length-1];if(t==="m"||t==="k"){const n=Number(e.substring(0,e.length-1));return!Number.isNaN(Number(n))}return!Number.isNaN(Number(e))}return!1},Xe=e=>Text.length>2&&e.includes(".")?!Number.isNaN(Number.parseFloat(e)):!1,We=(e,t,n)=>{for(let c=n??e.length-1;c>=0;c-=1){const l=e[c];if(t.includes(l))return c+1}},Ze="_pillDecorator_2bp86_1",Je={pillDecorator:Ze},B=({textElement:e,text:t,start:n,end:c,cursorPosition:l,clasName:E,style:i})=>{const f=O.useRef(null),[a,h]=O.useState(!1),[N,s]=O.useState(0),[P,v]=O.useState(0),S=O.useMemo(()=>a||l>=n&&l<=c?"hidden":"visible",[a,l,n,c]),_=O.useCallback(A=>{h(!0),A.stopPropagation()},[a,h]),C=O.useCallback(A=>{A.target!==e&&h(!1)},[h,e]);return O.useEffect(()=>(a&&document.addEventListener("mouseover",C),()=>{a&&document.removeEventListener("mouseover",C)}),[a]),O.useEffect(()=>{f.current&&(s((f.current.offsetHeight-e.offsetHeight)/2*-1),v((f.current.offsetWidth-e.offsetWidth)/2*-1))},[e]),I.jsx("div",{ref:f,className:[Je.pillDecorator,E??""].join(" "),style:{top:N,left:P,visibility:S,...i},onMouseEnter:_,children:t})};try{B.displayName="PillDecorator",B.__docgenInfo={description:"",displayName:"PillDecorator",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},clasName:{defaultValue:null,description:"",name:"clasName",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},start:{defaultValue:null,description:"",name:"start",required:!0,type:{name:"number"}},end:{defaultValue:null,description:"",name:"end",required:!0,type:{name:"number"}},cursorPosition:{defaultValue:null,description:"",name:"cursorPosition",required:!0,type:{name:"number"}},textElement:{defaultValue:null,description:"",name:"textElement",required:!0,type:{name:"HTMLElement"}},customProps:{defaultValue:null,description:"",name:"customProps",required:!1,type:{name:"any"}}}}}catch{}const Ge="_titleDecorator_c7tdt_1",Ye={titleDecorator:Ge};function oe({customProps:e,textElement:t,clasName:n,style:c}){var P;const l=O.useRef(null),[E,i]=O.useState("hidden"),f=O.useRef(null),{title:a,position:h="top"}=e,N=O.useCallback(()=>{setTimeout(()=>{i("visible"),f.current&&(clearTimeout(f.current),f.current=null)},1)},[i]),s=O.useCallback(()=>{f.current=setTimeout(()=>{i("hidden"),f.current=null},200)},[i]);return O.useEffect(()=>(t.addEventListener("mouseenter",N),t.addEventListener("mouseleave",s),()=>{t.removeEventListener("mouseenter",N),t.removeEventListener("mouseleave",s)}),[t]),I.jsx("div",{ref:l,className:[Ye.titleDecorator,n??""].join(" "),style:{visibility:E,top:h==="top"?(((P=l.current)==null?void 0:P.clientHeight)??18)*-1:t.offsetHeight,left:0,...c},onMouseEnter:()=>N(),onMouseLeave:()=>s(),children:I.jsx("span",{style:{fontSize:"9px",padding:"2px 8px 2px 7px"},children:a})})}try{oe.displayName="TitleDecorator",oe.__docgenInfo={description:"",displayName:"TitleDecorator",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},clasName:{defaultValue:null,description:"",name:"clasName",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},start:{defaultValue:null,description:"",name:"start",required:!0,type:{name:"number"}},end:{defaultValue:null,description:"",name:"end",required:!0,type:{name:"number"}},cursorPosition:{defaultValue:null,description:"",name:"cursorPosition",required:!0,type:{name:"number"}},textElement:{defaultValue:null,description:"",name:"textElement",required:!0,type:{name:"HTMLElement"}},customProps:{defaultValue:null,description:"",name:"customProps",required:!1,type:{name:"any"}}}}}catch{}const Qe="_smartFilterPage_1v2cj_1",et="_filterBar_1v2cj_8",tt="_grid_1v2cj_12",he={smartFilterPage:Qe,filterBar:et,grid:tt},re=({onChange:e,onCaretPositionChange:t,onItemSelected:n,...c})=>{const[l,E]=m.useState(""),[i,f]=m.useState([]),a=m.useCallback((v,S,_)=>{const C=S===0?S:We(v,` 
\r	`,S)??0,A=v.substring(C).split(/ |\n|\r|\t/),V=i.filter(o=>o.start+o.length<C),j="font-style: italic;font-weight: bold;";let D=C;A.forEach(o=>{if(o.match($e))_&&(fe.includes(o.toUpperCase())?V.push({id:`isin${D}`,start:D,length:o.length,style:j,Decorator:B,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white"}}):V.push({id:`isin${D}`,start:D,length:o.length,style:j,Decorator:B,decoratorStyle:{backgroundColor:"rgb(154, 61, 55)",color:"white"}}));else if(me.includes(o))_&&V.push({id:`ticker${D}`,start:D,length:o.length,style:j,Decorator:B,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white"}});else if(ze(o))_&&V.push({id:`vol${D}`,start:D,length:o.length,style:j,customProps:"Size",Decorator:oe,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white",fontWeight:"bold"}});else if(Xe(o))_&&V.push({id:`prc${D}`,start:D,length:o.length,style:j,Decorator:B,decoratorStyle:{backgroundColor:"rgb(68, 68, 68)",color:"white",fontWeight:"bold"}});else if(S>=D&&S<=D+o.trimEnd().length&&v[S]!==""){if(o.match(He)){const r=fe.filter(d=>d.includes(o));r.length>0&&V.push({id:"bad-edit",start:D,length:o.length,style:"font-style: italic;font-weight: bold;",dropDown:{activation:"cursorposition",options:r.slice(0,5)}})}else if(o.match(Be)){const r=me.filter(d=>d.includes(o));r.length>0&&V.push({id:"bad-edit",start:D,length:o.length,style:"font-style: italic;font-weight: bold;",dropDown:{activation:"cursorposition",options:r.slice(0,5)}})}}D=D+o.length+1}),JSON.stringify(V)!==JSON.stringify(i)&&f(V),l!==v&&E(v)},[l,i]),h=m.useCallback((v,S)=>{a(v,S,!0),e&&e(v,S)},[a,l,i]),N=m.useCallback(v=>{a(l,v),t&&t(v)},[a,l,i]),s=m.useMemo(()=>i.map(v=>v.customProps?{...v,customProps:{title:v.customProps,position:"top"}}:v),[i]),P=m.useCallback((v,S)=>{const _=i.find(C=>C.id===v);if(_){const C=`${l.substring(0,_.start)}${S} ${l.substring(_.start+_.length)}`;a(C,_.start,!0)}n&&n(v,S)},[i,l,a]);return I.jsxs("div",{className:he.smartFilterPage,children:[I.jsx("h4",{children:"Multi Styled Input"}),I.jsx("div",{className:he.filterBar,children:I.jsx(te,{text:l,textBlocks:s,onChange:h,onCaretPositionChange:N,DropDownComponent:ne,onItemSelected:P,...c})})]})};try{re.displayName="SmartInput",re.__docgenInfo={description:"Primary UI component for user interaction",displayName:"SmartInput",props:{exampleWidth:{defaultValue:null,description:"",name:"exampleWidth",required:!1,type:{name:"number"}},exampleHeight:{defaultValue:null,description:"",name:"exampleHeight",required:!1,type:{name:"number"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},onItemSelected:{defaultValue:null,description:"",name:"onItemSelected",required:!1,type:{name:"((id: string, option: string) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((text: string, position: number) => void)"}},onCaretPositionChange:{defaultValue:null,description:"",name:"onCaretPositionChange",required:!1,type:{name:"((position: number) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<Element, Element>) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((event: FocusEvent<Element, Element>) => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseEnter:{defaultValue:null,description:"",name:"onMouseEnter",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseLeave:{defaultValue:null,description:"",name:"onMouseLeave",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onMouseOver:{defaultValue:null,description:"",name:"onMouseOver",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<Element>) => void)"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"((event: KeyboardEvent<Element>) => void)"}}}}}catch{}const st={title:"Examples/SmartInput",component:re,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{exampleWidth:{control:"number",description:"The width of the example"},exampleHeight:{control:"number",description:"The height of the example"}},args:{onItemSelected:L(),onChange:L(),onCaretPositionChange:L(),onFocus:L(),onBlur:L(),onClick:L(),onDoubleClick:L(),onMouseDown:L(),onMouseUp:L(),onMouseEnter:L(),onMouseLeave:L(),onMouseOver:L(),onKeyDown:L(),onKeyUp:L()}},Z={args:{exampleHeight:600,exampleWidth:1e3}};var ge,ve,ye;Z.parameters={...Z.parameters,docs:{...(ge=Z.parameters)==null?void 0:ge.docs,source:{originalSource:`{
  args: {
    exampleHeight: 600,
    exampleWidth: 1000
  }
}`,...(ye=(ve=Z.parameters)==null?void 0:ve.docs)==null?void 0:ye.source}}};const it=["Primary"];export{Z as Primary,it as __namedExportsOrder,st as default};
